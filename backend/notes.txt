/backend
â”œâ”€â”€ app
â”‚   â”œâ”€â”€ main.py                  â† Entry point
â”‚   â”œâ”€â”€ api.py                   â† Handles routes & API endpoints
â”‚   â”œâ”€â”€ rag_pipeline.py          â† Core RAG logic
â”‚   â”œâ”€â”€ embeddings.py            â† Embedding logic (OpenAI or local)
â”‚   â”œâ”€â”€ vector_store.py          â† Vector search (use FAISS, not Pinecone)
â”‚   â”œâ”€â”€ llm.py                   â† Handles model inference (Ollama / LLMs)
â”‚   â””â”€â”€ data
â”‚       â””â”€â”€ hooks.json           â† JSON file with themes and hook examples
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md





â”œâ”€â”€ main.py                  # FastAPI entrypoint
â”œâ”€â”€ rag_pipeline/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ retriever.py         # Similarity search logic
â”‚   â”œâ”€â”€ embedder.py          # Embedding generator (HuggingFace)
â”‚   â”œâ”€â”€ generator.py         # Ollama or LLM wrapper
â”‚   â”œâ”€â”€ pipeline.py          # Full RAG logic (glue everything)
â”‚   â””â”€â”€ data_loader.py       # Load and chunk your hook dataset
â”‚
â”œâ”€â”€ data/
â”‚   â””â”€â”€ hooks_dataset.json   # Your static training hooks (pre-chunked or raw)
â”‚
â”œâ”€â”€ models/
â”‚   â””â”€â”€ vector_store/        # Chroma or other local vector DB files
â”‚
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ logger.py            # Logging setup
â”‚
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
ğŸ’¡ Purpose of Each File:
main.py
Entry point for FastAPI.

Routes:

/generate-hook: Accepts script context and theme.

Calls pipeline.generate_hook(context, theme).

retriever.py
Connects to ChromaDB.

Performs similarity search using theme-matched embeddings.

Returns top-k hooks.

embedder.py
Loads the embedding model (sentence-transformers, bge, instructor-xl, etc.).

Converts context or theme into vector form.

Used by retriever.py and for pre-processing training data.

generator.py
Loads LLM via Ollama API (like Mistral, OpenChat, etc.).

Takes context + relevant hooks and generates a new hook.

pipeline.py
Orchestrates the full RAG flow:

Embed context + theme

Retrieve matching hooks

Pass everything to LLM

Return a clean output

data_loader.py
Pre-loads your existing hook database.

Optionally pre-chunks large hooks if needed.

hooks_dataset.json
Your pre-created dataset with structure like:

json
Copy
Edit
[
  {
    "theme": "motivation",
    "hook": "What if I told you one decision could change your life forever?"
  }
]










[User Input] â†’ script + theme
        â†“
[Embed Theme/Context]
        â†“
[Retrieve Top Hooks] â† from ChromaDB
        â†“
[Pass to LLM]
        â†“
[Generated Hook]

































hookai-rag-backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # FastAPI app entrypoint
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ routes.py           # All API endpoints (e.g. /generate-hook)
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ config.py           # Env variables, settings
â”‚   â”‚   â””â”€â”€ logger.py           # Custom logger setup
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ embeddings.py       # Vector embedding logic
â”‚   â”‚   â””â”€â”€ prompt_templates.py # LLM prompt templates
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ retriever.py        # pgvector retrieval logic
â”‚   â”‚   â”œâ”€â”€ generator.py        # LLM call logic (OpenAI, Ollama)
â”‚   â”‚   â””â”€â”€ postprocess.py      # Ranking, scoring, deduplication
â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â””â”€â”€ payloads.py         # Pydantic models for request/response
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ text_utils.py       # Chunking, keyword extraction, etc.
â”‚
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ db.py                   # pgvector connection setup
â”‚   â””â”€â”€ seed.py                 # Optional: seed data/scripts
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_routes.py
â”‚   â”œâ”€â”€ test_retriever.py
â”‚   â””â”€â”€ test_generator.py
â”‚
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env                        # Secrets and API keys (ignored in .gitignore)
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
